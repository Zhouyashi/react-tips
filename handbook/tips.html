<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tips | React学习文档</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/react-tips/assets/css/0.styles.a336487c.css" as="style"><link rel="preload" href="/react-tips/assets/js/app.d810ae55.js" as="script"><link rel="preload" href="/react-tips/assets/js/3.d9804723.js" as="script"><link rel="preload" href="/react-tips/assets/js/1.8b4155cb.js" as="script"><link rel="preload" href="/react-tips/assets/js/12.ebd26a42.js" as="script"><link rel="prefetch" href="/react-tips/assets/js/10.1e525a97.js"><link rel="prefetch" href="/react-tips/assets/js/11.055476a3.js"><link rel="prefetch" href="/react-tips/assets/js/4.3ffdea20.js"><link rel="prefetch" href="/react-tips/assets/js/5.aff7bbf3.js"><link rel="prefetch" href="/react-tips/assets/js/6.9c60a168.js"><link rel="prefetch" href="/react-tips/assets/js/7.e3208e9b.js"><link rel="prefetch" href="/react-tips/assets/js/8.89154e63.js"><link rel="prefetch" href="/react-tips/assets/js/9.7acab63f.js">
    <link rel="stylesheet" href="/react-tips/assets/css/0.styles.a336487c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-973d3248><div data-v-973d3248><div class="password-shadow password-wrapper-out" style="display:none;" data-v-fbcdf562 data-v-973d3248 data-v-973d3248><h3 class="title" data-v-fbcdf562>React学习文档</h3> <p class="description" data-v-fbcdf562></p> <label id="box" class="inputBox" data-v-fbcdf562><input type="password" value="" data-v-fbcdf562> <span data-v-fbcdf562>Konck! Knock!</span> <button data-v-fbcdf562>OK</button></label> <div class="footer" data-v-fbcdf562><span data-v-fbcdf562><i class="iconfont reco-theme" data-v-fbcdf562></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-fbcdf562>vuePress-theme-reco</a></span> <span data-v-fbcdf562><i class="iconfont reco-copyright" data-v-fbcdf562></i> <a data-v-fbcdf562><!---->
          
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-973d3248><header class="navbar" data-v-973d3248><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/react-tips/" class="home-link router-link-active"><!----> <span class="site-name">React学习文档</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/react-tips/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/Zhouyashi/react-tips" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-973d3248></div> <aside class="sidebar" data-v-973d3248><div class="personal-info-wrapper" data-v-31b4310e data-v-973d3248><!----> <!----> <div class="num" data-v-31b4310e><div data-v-31b4310e><h3 data-v-31b4310e>2</h3> <h6 data-v-31b4310e>文章</h6></div> <div data-v-31b4310e><h3 data-v-31b4310e>0</h3> <h6 data-v-31b4310e>标签</h6></div></div> <ul class="social-links" data-v-31b4310e></ul> <hr data-v-31b4310e></div> <nav class="nav-links"><div class="nav-item"><a href="/react-tips/" class="nav-link"><i class="undefined"></i>
  首页
</a></div><div class="nav-item"><a href="https://github.com/Zhouyashi/react-tips" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/react-tips/" class="sidebar-heading clickable router-link-active"><span>欢迎学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-tips/" aria-current="page" class="sidebar-link">学前必读</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/react-tips/handbook/tip" class="sidebar-heading clickable open"><span>基础学习</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/react-tips/handbook/git.html" class="sidebar-link">常用git</a></li><li><a href="/react-tips/handbook/tips.html" aria-current="page" class="active sidebar-link">Tips</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-fbcdf562 data-v-973d3248><h3 class="title" data-v-fbcdf562>Tips</h3> <!----> <label id="box" class="inputBox" data-v-fbcdf562><input type="password" value="" data-v-fbcdf562> <span data-v-fbcdf562>Konck! Knock!</span> <button data-v-fbcdf562>OK</button></label> <div class="footer" data-v-fbcdf562><span data-v-fbcdf562><i class="iconfont reco-theme" data-v-fbcdf562></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-fbcdf562>vuePress-theme-reco</a></span> <span data-v-fbcdf562><i class="iconfont reco-copyright" data-v-fbcdf562></i> <a data-v-fbcdf562><!---->
          
        <!---->
        2023
      </a></span></div></div> <div data-v-973d3248><div data-v-973d3248><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">Tips</h1> <div data-v-663b3081><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h2 id="随机数"><a href="#随机数" class="header-anchor">#</a> 随机数</h2> <div class="language- extra-class"><pre class="language-text"><code>Math.floor(Math.random() * (max - min + 1) + min)
Math.ceil(Math.random() * (max - min + 1) + min - 1)
Math.round(Math.random() * (max - min + 1) + min - 0.5)
</code></pre></div><h2 id="如何判断一个对象是不是空对象"><a href="#如何判断一个对象是不是空对象" class="header-anchor">#</a> 如何判断一个对象是不是空对象？</h2> <div class="language-js extra-class"><pre class="language-js"><code> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span>
</code></pre></div><h2 id="数组去重"><a href="#数组去重" class="header-anchor">#</a> 数组去重</h2> <div class="language-tsx extra-class"><pre class="language-tsx"><code>保留重复项：
<span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> 或 <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">deduplication</span> <span class="token operator">=</span> arr <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">deduplication</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [ 11, 23, 26, 9 ]</span>

不保留重复项
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">filterNonUnique</span> <span class="token operator">=</span> arr <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">===</span> arr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">filterNonUnique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 26, 9 ]</span>

只保留重复项
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">26</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> <span class="token function-variable function">filterUnique</span> <span class="token operator">=</span> arr <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token operator">!==</span> arr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">filterUnique</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 11, 23, 23, 11 ]</span>
</code></pre></div><p>classname =  &quot;quaterleftli active&quot;</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code>className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">quaterleftli </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>value<span class="token operator">===</span><span class="token boolean">true</span> <span class="token operator">?</span> <span class="token string">'active'</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span>
</code></pre></div><p>逗号分割的字符串转换为数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//value='1,2,3' arr=['1','2','3']</span>
当arr为空时<span class="token punctuation">,</span>arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span>
arr<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> arr
</code></pre></div><h2 id="数组对象去重"><a href="#数组对象去重" class="header-anchor">#</a> 数组对象去重</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">//根据id去重</span>
<span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArr <span class="token operator">=</span> arrObj<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>v <span class="token operator">=&gt;</span> <span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p>类组件</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">public</span> formRef<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">this</span><span class="token operator">?.</span>formRef<span class="token operator">?.</span>current<span class="token operator">?.</span><span class="token function">setFieldsValue</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">RECORDS</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Modal</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>邮寄信息<span class="token punctuation">'</span></span> <span class="token attr-name">visible</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>postModalVisible<span class="token punctuation">}</span></span>
      <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>
        <span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text"> 确定 </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> postModalVisible<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">取消</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span>  <span class="token attr-name">onFinish</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onFromFinish<span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>formRef<span class="token punctuation">}</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            //
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">htmlType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token plain-text">提交</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">onClose</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">取消</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Modal</span></span><span class="token punctuation">&gt;</span></span>

</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code>indexOf 
如果存在该元素，则返回第一次出现的索引值；
若整个数组不存在该元素，则返回<span class="token operator">-</span><span class="token number">1</span>。
只要判断返回的数据是不是<span class="token operator">-</span><span class="token number">1</span>，就能知道数组中是否包含该元素。
arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// true, indexOf返回0</span>
arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// false, indexOf返回-1</span>


indexOf和lastIndexOf还有第 <span class="token number">2</span> 个可选参数 fromIndex，用来表示从哪个索引开始进行搜索。

在indexOf中，若fromIndex 超过数组的长度，则直接返回<span class="token operator">-</span><span class="token number">1</span>，若为负数，则从最后往前数几个索引（arr<span class="token punctuation">.</span>length<span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>fromIndex<span class="token punctuation">)</span>），然后开始往后搜索。

在 lastIndexOf 中，若 fromIndex 达到或超过数组的长度，则搜索整个数组；若为负数，则从最后往前数几个索引（arr<span class="token punctuation">.</span>length<span class="token operator">-</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>fromIndex<span class="token punctuation">)</span>），然后开始往前搜索，若负数的绝对值超过了数组的长度，则直接返回<span class="token operator">-</span><span class="token number">1</span>。


arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, 从索引值2开始往后查找，首先找到的13的索引值为4</span>
arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, 从索引值1(11-10)开始往后检索</span>
arr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0, 从索引值2往前开始搜索</span>
arr<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4, 从索引值9(11-2)开始往前搜索</span>

</code></pre></div><h2 id="父组件获取子组件中的值-通过ref"><a href="#父组件获取子组件中的值-通过ref" class="header-anchor">#</a> 父组件获取子组件中的值-通过ref</h2> <p>类组件：</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">//父组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">UserRef1</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>child <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function-variable function">focus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//注意需要两次ref，每次ref后都跟crueent</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">.</span>current<span class="token punctuation">.</span>inputRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>input<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Child</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>child<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//子组件</span>
<span class="token keyword">class</span> <span class="token class-name">Child</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      name<span class="token operator">:</span> <span class="token string">'哈哈'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>inputRef <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>inputRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>函数式组件：</p> <p>在函数组件中要获取子组件的数据,需要两步骤1.将<code>ref</code>传递到子组件中,2.需要使用<code>forwardRef</code>对子组件进行包装</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token comment">//父组件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> parentRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">focusHander</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>parentRef<span class="token punctuation">)</span><span class="token punctuation">;</span>
    parentRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    parentRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'哈哈'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ForwardChild</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>parentRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>focusHander<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">获取焦点</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//子组件</span>
<span class="token keyword">const</span> ForwardChild<span class="token operator">:</span> React<span class="token punctuation">.</span><span class="token constant">FC</span> <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span>parentRef<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>parentRef<span class="token punctuation">}</span></span><span class="token punctuation">/&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//如果子组件是class类组件</span>
<span class="token keyword">class</span> <span class="token class-name">ForwardChild</span> <span class="token keyword">extends</span> <span class="token class-name">Component<span class="token operator">&lt;</span>IProps<span class="token punctuation">,</span> IState<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
 <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
 	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input</span></span>
            <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>parentRef<span class="token punctuation">}</span></span>
          <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> React<span class="token punctuation">.</span><span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> ref<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ForwardChild</span></span>
  <span class="token attr-name">parentRef</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>ref<span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span>
<span class="token punctuation">/&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//父组件中</span>
<span class="token keyword">const</span> parentRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ForwardChild</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>parentRef<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><h2 id="一、array"><a href="#一、array" class="header-anchor">#</a> 一、Array</h2> <h3 id="_1-添加元素"><a href="#_1-添加元素" class="header-anchor">#</a> 1.添加元素</h3> <p>1）.push:尾部添加元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'草莓'</span><span class="token punctuation">,</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span><span class="token string">'苹果'</span><span class="token punctuation">,</span><span class="token string">'西瓜'</span><span class="token punctuation">,</span><span class="token string">'番茄'</span><span class="token punctuation">,</span><span class="token string">'葡萄'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'榴莲'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['草莓','香蕉','苹果','西瓜','番茄','葡萄','榴莲'];</span>
</code></pre></div><p>2）.unshift:头部添加元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'草莓'</span><span class="token punctuation">,</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span><span class="token string">'苹果'</span><span class="token punctuation">,</span><span class="token string">'西瓜'</span><span class="token punctuation">,</span><span class="token string">'番茄'</span><span class="token punctuation">,</span><span class="token string">'葡萄'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">'榴莲'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['榴莲','草莓','香蕉','苹果','西瓜','番茄','葡萄'];</span>
</code></pre></div><p>3）splice：js的<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E7%BB%84&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">数组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中没有.insert()插入方法，实现插入需要通过splice间接地实现。改变原数组</p> <div class="language-js extra-class"><pre class="language-js"><code>array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>start<span class="token punctuation">[</span><span class="token punctuation">,</span> deleteCount<span class="token punctuation">[</span><span class="token punctuation">,</span> item1<span class="token punctuation">[</span><span class="token punctuation">,</span> item2<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">//第二个参数 deleteCount 表示要删除的元素数量。如果不指定 deleteCount 或者其值大于数组长度减去 start 索引处的值，则会删除从 start 索引处开始的所有元素。</span>
<span class="token comment">//表示从index开始，删除0个元素，添加value，value可以为多个想要添加的元素</span>
arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">]</span>

<span class="token keyword">let</span> deletedElements <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1, 2, 3, 4, 10, 5, &quot;张三&quot;, &quot;李四&quot;, &quot;王五&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>deletedElements<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//空 []</span>


arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">&quot;倒数第二&quot;</span><span class="token punctuation">)</span> <span class="token comment">//在倒数第一个数据前插入数据</span>
</code></pre></div><p>4）slice(): 从原数组中提取出指定下标范围的元素，返回新数组，不改变原数组</p> <p>索引左闭右开 [ start , end ）</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> subArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre></div><h3 id="_2-删除元素"><a href="#_2-删除元素" class="header-anchor">#</a> 2.删除元素</h3> <p>1）.pop:删除尾部元素</p> <div class="language-sql extra-class"><pre class="language-sql"><code>var array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'草莓'</span><span class="token punctuation">,</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span><span class="token string">'苹果'</span><span class="token punctuation">,</span><span class="token string">'西瓜'</span><span class="token punctuation">,</span><span class="token string">'番茄'</span><span class="token punctuation">,</span><span class="token string">'葡萄'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

array<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['草莓','香蕉','苹果','西瓜','番茄'];</span>
</code></pre></div><p>2）.shift:删除头部元素</p> <div class="language-sql extra-class"><pre class="language-sql"><code>var array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'草莓'</span><span class="token punctuation">,</span><span class="token string">'香蕉'</span><span class="token punctuation">,</span><span class="token string">'苹果'</span><span class="token punctuation">,</span><span class="token string">'西瓜'</span><span class="token punctuation">,</span><span class="token string">'番茄'</span><span class="token punctuation">,</span><span class="token string">'葡萄'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
array<span class="token punctuation">.</span>shift<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span>log<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//['香蕉','苹果','西瓜','番茄','葡萄'];</span>
</code></pre></div><p>3） .splice:删除指定下标元素</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> splice <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//删除从下标1开始，1个元素</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 3, 4, 5, 6]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>splice<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[2]</span>
</code></pre></div><p>注：.splice(下标，几个元素)：返回的是删除的数组</p> <p>​     它改变原数组，如果想要删除数组中指定元素，要.splice，然后打印原数组即可。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> splice <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//删除从下标0开始，三个元素1,2,3</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[4, 5, 6]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>splice<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 2, 3]</span>
</code></pre></div><p>4）slice(): 从原数组中提取出指定下标范围的元素，返回新数组，不改变原数组</p> <p>索引左闭右开 [ start , end ）</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> subArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>subArr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4]</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [1, 2, 3, 4, 5]</span>
</code></pre></div><h3 id="_3-合并数组"><a href="#_3-合并数组" class="header-anchor">#</a> 3.合并数组</h3> <p>1 ）.concat</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//1) concat:合并数组</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span>arr3<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[1, 2, 3, 4, 5, 6, 7, 8, 9]</span>
</code></pre></div><p>2）...:扩展运算符</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//2）...:扩展运算符合并数组</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span><span class="token operator">...</span>arr2<span class="token punctuation">,</span><span class="token operator">...</span>arr3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//[1, 2, 3, 4, 5, 6, 7, 8, 9]</span>


<span class="token comment">//考虑去重</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//[1,2,3,5,6] </span>
</code></pre></div><h3 id="_4-包含某个元素"><a href="#_4-包含某个元素" class="header-anchor">#</a> 4.包含某个元素</h3> <p>1）.indexOf:是否包含某个元素，包含返回下标，不包含返回-1</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//0      元素为1的下标</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//-1    不存在</span>
</code></pre></div><p>2）.includes：是否包含某个元素，包含返回true，不包含返回false</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//false</span>
</code></pre></div><p>注：1和'1'不同，一个是number类型，一个是string类型</p> <h3 id="_5-类数组转换成数组"><a href="#_5-类数组转换成数组" class="header-anchor">#</a> 5.类数组转换成数组</h3> <p>Array.from(类数组名):将类数组转换成数组
注：类数组需要有下标和lenght</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span><span class="token string">'小丽'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span><span class="token string">'小兰'</span><span class="token punctuation">,</span><span class="token string-property property">'length'</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&quot;小明&quot;, &quot;小红&quot;, &quot;小丽&quot;, &quot;小兰&quot;]</span>
</code></pre></div><h3 id="_6-判断是否为数组"><a href="#_6-判断是否为数组" class="header-anchor">#</a> 6.判断是否为数组</h3> <p>Array.isArray:判断是否为数组</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">0</span><span class="token operator">:</span><span class="token string">'小明'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token operator">:</span><span class="token string">'小丽'</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token operator">:</span><span class="token string">'小兰'</span><span class="token punctuation">,</span><span class="token string-property property">'length'</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre></div><h3 id="_7-判断数组是否符合条件"><a href="#_7-判断数组是否符合条件" class="header-anchor">#</a> 7.判断数组是否符合条件</h3> <h4 id="every"><a href="#every" class="header-anchor">#</a> every</h4> <p>检测数组所有元素是否都符合指定条件.</p> <ul><li>如果数组中检测到有一个元素不满足，则整个表达式返回 <code>false</code>，且剩余的元素不会再进行检测；</li> <li>如果所有元素都满足条件，则返回 <code>true</code>；</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 0.0.2/every.js</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">every</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token string">'pr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3, 4 ]</span>
</code></pre></div><h4 id="some"><a href="#some" class="header-anchor">#</a> some</h4> <p>用于检测数组中的元素是否满足指定条件。</p> <ul><li>如果有一个元素满足条件，则表达式返回 <code>true</code>, 剩余的元素不会再执行检测;</li> <li>如果没有满足条件的元素，则返回 <code>false</code>;</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 0.0.2/some.js</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token string">'pr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3, 4 ]</span>
</code></pre></div><h4 id="filter"><a href="#filter" class="header-anchor">#</a> filter</h4> <p>创建一个新的数组，新数组中的元素是通过检查符合条件的所有元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 0.0.2/filter.js</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [3, 4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token string">'pr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//不改变原数组</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3, 4 ]</span>
</code></pre></div><h4 id="find"><a href="#find" class="header-anchor">#</a> find</h4> <ol><li>find() 方法返回通过测试（函数内判断）的数组的第一个元素的值。</li> <li>如果没有符合条件的元素返回 undefined</li> <li>find() 对于空数组，函数是不会执行的。</li> <li>不改变原数组</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 0.0.2/filter.js</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">i</span> <span class="token operator">=&gt;</span> i <span class="token operator">===</span> <span class="token string">'pr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'=&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 1, 2, 3, 4 ]</span>
</code></pre></div><h4 id="reduce"><a href="#reduce" class="header-anchor">#</a> reduce</h4> <p>接收一个函数作为累加器，数组中的每个值（从左到右）开始缩减，最终计算为一个值。若是空数组是不会执行回调函数的;</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//在这个例子中，我们传入了一个回调函数，该回调函数接受两个参数：accumulator 和 currentValue，并返回它们的和。我们还传入了初始值 0，作为累加器的初始值。reduce() 方法遍历整个数组，并将每个元素都传入回调函数中进行计算，最终返回累加器的值，即 15。</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">accumulator<span class="token punctuation">,</span> currentValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> accumulator <span class="token operator">+</span> currentValue<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>

</code></pre></div><p>const arr = [
{ classId: &quot;1&quot;, name: &quot;张三&quot;, age: 16 },
{ classId: &quot;1&quot;, name: &quot;李四&quot;, age: 15 },
{ classId: &quot;2&quot;, name: &quot;王五&quot;, age: 16 },
{ classId: &quot;3&quot;, name: &quot;赵六&quot;, age: 15 },
{ classId: &quot;2&quot;, name: &quot;孔七&quot;, age: 16 }
];
//通过classId对arr进行分组,返回数组</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">const</span> groupedArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> curr<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>acc<span class="token punctuation">[</span>curr<span class="token punctuation">.</span>classId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    acc<span class="token punctuation">[</span>curr<span class="token punctuation">.</span>classId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  acc<span class="token punctuation">[</span>curr<span class="token punctuation">.</span>classId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>curr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//返回值</span>
<span class="token punctuation">{</span>
  <span class="token string-property property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> classId<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> classId<span class="token operator">:</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;2&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> classId<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;王五&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> classId<span class="token operator">:</span> <span class="token string">&quot;2&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;孔七&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">16</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">&quot;3&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> classId<span class="token operator">:</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token string">&quot;赵六&quot;</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token number">15</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre></div><h4 id="join"><a href="#join" class="header-anchor">#</a> join</h4> <p><code>join()</code> 方法是 JavaScript 数组对象的一种方法，用于将数组的所有元素连接为一个字符串。</p> <p><code>join()</code> 方法接收一个可选的参数，用于指定连接元素之间的分隔符。如果未提供分隔符，则使用默认的逗号 <code>,</code>。该方法将返回连接后的字符串，而不会修改原始数组。</p> <p>以下是一个使用 <code>join()</code> 方法将数组连接为字符串的示例</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 默认分隔符为逗号</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 &quot;apple,banana,orange&quot;</span>

<span class="token keyword">const</span> str2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 自定义分隔符为 &quot;-&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 输出 &quot;apple-banana-orange&quot;</span>

<span class="token comment">//需要注意的是，join() 方法将数组的每个元素都转换为字符串。如果某个元素为 null 或 undefined，则在连接后的字符串中将显示为 null 或 undefined。如果数组中的元素是对象，则将调用该对象的 toString() 方法将其转换为字符串。如果数组中的元素是数组，则其会递归地转换为字符串并连接在一起。</span>
</code></pre></div><h1 id="二、对象"><a href="#二、对象" class="header-anchor">#</a> 二、对象</h1> <p><strong>原始类型(基本类型）</strong></p> <ul><li><code>Null</code>：只包含一个值：<code>null</code></li> <li><code>Undefined</code>：只包含一个值：<code>undefined</code></li> <li><code>Boolean</code>：包含两个值：<code>true</code>和<code>false</code></li> <li><code>Number</code>：整数或浮点数，还有一些特殊值（<code>-Infinity</code>、<code>+Infinity</code>、<code>NaN</code>）</li> <li><code>String</code>：一串表示文本值的字符序列</li> <li><code>Symbol</code>：一种实例是唯一且不可改变的数据类型</li></ul> <p>(在<code>es10</code>中加入了第七种原始类型<code>BigInt</code>，现已被最新<code>Chrome</code>支持)</p> <p><strong>对象类型(引用类型)</strong></p> <ul><li><p>在<code>ECMAScript</code>关于类型的定义中，只给出了<code>Object</code>类型，实际上，我们平时使用的很多引用类型的变量，并不是由<code>Object</code>构造的，但是它们原型链的终点都是<code>Object</code>，这些类型都属于引用类型。</p> <ul><li>Object对象</li> <li><code>Array</code> 数组</li> <li><code>Date</code> 日期</li> <li><code>RegExp</code> 正则</li> <li><code>Function</code> 函数</li></ul> <h2 id="二、为什么区分原始类型和对象类型"><a href="#二、为什么区分原始类型和对象类型" class="header-anchor">#</a> 二、为什么区分原始类型和对象类型</h2> <h3 id="_2-1-不可变性"><a href="#_2-1-不可变性" class="header-anchor">#</a> 2.1 不可变性</h3> <p>上面所提到的原始类型，在<code>ECMAScript</code>标准中，它们被定义为<code>primitive values</code>，即原始值，代表值本身是不可被改变的。</p> <p>以字符串为例，我们在调用操作字符串的方法时，没有任何方法是可以直接改变字符串的：</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">var str</span> <span class="token punctuation">=</span> <span class="token value attr-value">'ConardLi';</span>
str.slice(1);
str.substr(1);
str.trim(1);
str.toLowerCase(1);
<span class="token key attr-name">str[0]</span> <span class="token punctuation">=</span> <span class="token value attr-value">1;</span>
console.log(str);  // ConardLi
复制代码
</code></pre></div><p>在上面的代码中我们对<code>str</code>调用了几个方法，无一例外，这些方法都在原字符串的基础上产生了一个新字符串，而非直接去改变<code>str</code>，这就印证了字符串的不可变性。</p> <p>那么，当我们继续调用下面的代码：</p> <div class="language-rust extra-class"><pre class="language-rust"><code><span class="token keyword">str</span> <span class="token operator">+=</span> <span class="token char">'6'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">str</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ConardLi6</span>
</code></pre></div><p>你会发现，<code>str</code>的值被改变了，这不就打脸了字符串的不可变性么？其实不然，我们从内存上来理解：</p> <p>在<code>JavaScript</code>中，每一个变量在内存中都需要一个空间来存储。</p> <p>内存空间又被分为两种，栈内存与堆内存。</p> <p>栈内存：</p> <ul><li>存储的值大小固定</li> <li>空间较小</li> <li>可以直接操作其保存的变量，运行效率高</li> <li>由系统自动分配存储空间</li></ul> <p><code>JavaScript</code>中的原始类型的值被直接存储在栈中，在变量定义时，栈就为其分配好了内存空间。</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/28/16afa4daf89c565e~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <p>由于栈中的内存空间的大小是固定的，那么注定了存储在栈中的变量就是不可变的。</p> <p>在上面的代码中，我们执行了<code>str += '6'</code>的操作，实际上是在栈中又开辟了一块内存空间用于存储<code>'ConardLi6'</code>，然后将变量<code>str</code>指向这块空间，所以这并不违背<code>不可变性的</code>特点。</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/28/16afa4dd38de23b8~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <h3 id="_2-2-引用类型"><a href="#_2-2-引用类型" class="header-anchor">#</a> 2.2 引用类型</h3> <p>堆内存：</p> <ul><li>存储的值大小不定，可动态调整</li> <li>空间较大，运行效率低</li> <li>无法直接操作其内部存储，使用引用地址读取</li> <li>通过代码进行分配空间</li></ul> <p>相对于上面具有不可变性的原始类型，我习惯把对象称为引用类型，引用类型的值实际存储在堆内存中，它在栈中只存储了一个固定长度的地址，这个地址指向堆内存中的值。</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">var obj1</span> <span class="token punctuation">=</span> <span class="token value attr-value">{name:&quot;ConardLi&quot;}</span>
<span class="token key attr-name">var obj2</span> <span class="token punctuation">=</span> <span class="token value attr-value">{age:18}</span>
<span class="token key attr-name">var obj3</span> <span class="token punctuation">=</span> <span class="token value attr-value">function(){...}</span>
<span class="token key attr-name">var obj4</span> <span class="token punctuation">=</span> <span class="token value attr-value">[1,2,3,4,5,6,7,8,9]</span>
</code></pre></div><p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/5/28/16afa4df7faa4630~tplv-t2oaga2asx-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <blockquote><p>由于内存是有限的，这些变量不可能一直在内存中占用资源，这里推荐下这篇文章<a href="https://juejin.cn/post/6844903833387155464" target="_blank" rel="noopener noreferrer">JavaScript中的垃圾回收和内存泄漏<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，这里告诉你<code>JavaScript</code>是如何进行垃圾回收以及可能会发生内存泄漏的一些场景。</p></blockquote> <p>当然，引用类型就不再具有<code>不可变性</code>了，我们可以轻易的改变它们：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>obj1<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;ConardLi6&quot;</span><span class="token punctuation">;</span>
obj2<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">19</span><span class="token punctuation">;</span>
obj4<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{name:&quot;ConardLi6&quot;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {age:19}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj4<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// []</span>

</code></pre></div><p>以数组为例，它的很多方法都可以改变它自身。</p> <ul><li><code>pop()</code> 删除数组最后一个元素，如果数组为空，则不改变数组，返回undefined，改变原数组，返回被删除的元素</li> <li><code>push()</code>向数组末尾添加一个或多个元素，改变原数组，返回新数组的长度</li> <li><code>shift()</code>把数组的第一个元素删除，若空数组，不进行任何操作，返回undefined,改变原数组，返回第一个元素的值</li> <li><code>unshift()</code>向数组的开头添加一个或多个元素，改变原数组，返回新数组的长度</li> <li><code>reverse()</code>颠倒数组中元素的顺序，改变原数组，返回该数组</li> <li><code>sort()</code>对数组元素进行排序，改变原数组，返回该数组</li> <li><code>splice()</code>从数组中添加/删除项目，改变原数组，返回被删除的元素</li></ul></li></ul> <p>基本类型就是值的传递（值的赋值）</p> <p>引用类型就是地址的传递。</p> <p>栈内存存放的是基本类。</p> <p>堆内存存放的是引用类。</p> <p>原始类型具有不可变性，引用类型可以轻易改变。</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">let obj</span> <span class="token punctuation">=</span> <span class="token value attr-value">{};</span>
function changeValue(obj){
  <span class="token key attr-name">obj.name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'ConardLi'; //原始类型string</span>
  <span class="token key attr-name">obj</span> <span class="token punctuation">=</span> <span class="token value attr-value">{name:'code秘密花园'}; //引用类型object</span>
}
changeValue(obj);
console.log(obj.name); // ConardLi
</code></pre></div><p>可见，函数参数传递的并不是变量的<code>引用</code>，而是变量拷贝的副本，当变量是原始类型时，这个副本就是值本身，当变量是引用类型时，这个副本是指向堆内存的地址。所以，再次记住：</p> <blockquote><h4 id="ecmascript中所有的函数的参数都是按值传递的。"><a href="#ecmascript中所有的函数的参数都是按值传递的。" class="header-anchor">#</a> <strong><code>ECMAScript</code>中所有的函数的参数都是按值传递的。</strong></h4></blockquote> <p>useCallback，useMemo, memo 就是为了判断引用数据类型是否改变的工具方法</p> <h4 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h4> <p>1、乞丐版</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">deepCopy</span> <span class="token operator">=</span> <span class="token parameter">obj</span> <span class="token operator">=&gt;</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>2、基础版本</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">//兼容数组</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cloneTarget<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">clone</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//递归</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// 初始化返回结果</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span> <span class="token operator">||</span>
    <span class="token comment">// 加 || 的原因是为了防止 Array 的 prototype 被重写，Array.isArray 也是如此</span>
    <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;[object Array]&quot;</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 防止循环引用</span>
  map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 保证 key 不是原型属性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 递归调用</span>
      result<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 返回结果</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="小数相加"><a href="#小数相加" class="header-anchor">#</a> 小数相加</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>  <span class="token keyword">const</span> <span class="token function-variable function">addNum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>num1<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> num2<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> sq1<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> sq2<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> m<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      sq1 <span class="token operator">=</span> num1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sq1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      sq2 <span class="token operator">=</span> num2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      sq2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    m <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>sq1<span class="token punctuation">,</span> sq2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>num1 <span class="token operator">*</span> m <span class="token operator">+</span> num2 <span class="token operator">*</span> m<span class="token punctuation">)</span> <span class="token operator">/</span> m<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

</code></pre></div><h2 id="array-from-抽取数组对象中的某一属性为数组"><a href="#array-from-抽取数组对象中的某一属性为数组" class="header-anchor">#</a> Array.from-抽取数组对象中的某一属性为数组</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">[</span>
     <span class="token punctuation">{</span>
         <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
         <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
         <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
         <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token punctuation">{</span>
         <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
         <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;李五&quot;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">]</span>
<span class="token keyword">var</span> userName <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>name<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>userName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;李四&quot;, &quot;张三&quot;, &quot;李五&quot;]</span>
</code></pre></div><h2 id="数组转换为数组对象"><a href="#数组转换为数组对象" class="header-anchor">#</a> 数组转换为数组对象</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> newArray <span class="token operator">=</span> array<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">myValue</span><span class="token operator">:</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArray<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出: [{ myValue: 1 }, { myValue: 2 }, { myValue: 3 }]</span>

</code></pre></div><h2 id="object-assign-往数组对象中的每个对象都新增同一字段"><a href="#object-assign-往数组对象中的每个对象都新增同一字段" class="header-anchor">#</a> Object.assign-往数组对象中的每个对象都新增同一字段</h2> <div class="language-typescript extra-class"><pre class="language-typescript"><code>consumeList<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'add'</span><span class="token punctuation">,</span>amout<span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>projectNo<span class="token operator">:</span><span class="token number">666</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'add'</span><span class="token punctuation">,</span>amount<span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">}</span><span class="token punctuation">]</span>     

consumeList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      projectNo<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      date<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      projectCname<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span> 

<span class="token comment">//如果有同名属性的话，后面的属性值会覆盖前面的属性值。</span>
consumeList<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'add'</span><span class="token punctuation">,</span>amout<span class="token operator">:</span><span class="token number">1000</span><span class="token punctuation">,</span>projectNo<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>date<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> projectCname<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'add'</span><span class="token punctuation">,</span>amount<span class="token operator">:</span><span class="token number">3000</span><span class="token punctuation">,</span>projectNo<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>date<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> projectCname<span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span><span class="token punctuation">]</span>  


<span class="token comment">//单对象，非数组对象</span>
<span class="token keyword">const</span> target<span class="token operator">=</span><span class="token punctuation">{</span>name<span class="token operator">:</span><span class="token string">'guxin'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> source<span class="token operator">=</span><span class="token punctuation">{</span>state<span class="token operator">:</span><span class="token string">'signle'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">}</span>

<span class="token comment">//const result=Object.assign(target,source)</span>
<span class="token keyword">const</span> result<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">...</span>target<span class="token punctuation">,</span> <span class="token operator">...</span>source<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token comment">//如果有同名属性的话，后面的属性值会覆盖前面的属性值。</span>
<span class="token comment">//result={name:'guxin',state:'signle',age:22}</span>


<span class="token comment">//我们可以看到source上的state属性合并到了target对象上。如果只是想将两个或多个对象的属性合并到一起，不改变原有对象的属性，可以用一个空的对象作为target对象。像下面这样：</span>
<span class="token keyword">var</span> result<span class="token operator">=</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>target<span class="token punctuation">,</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//解构赋值</span>
<span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// bad</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// good</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj1<span class="token punctuation">,</span> <span class="token operator">...</span>obj2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="多层数组对象改变属性名"><a href="#多层数组对象改变属性名" class="header-anchor">#</a> 多层数组对象改变属性名</h2> <div class="language-tsx extra-class"><pre class="language-tsx"><code>
  <span class="token keyword">const</span> renameProperties <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> propertyMap<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token builtin">Array</span><span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果是数组，则递归处理每个元素</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">renameProperties</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> propertyMap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果是对象，则遍历属性并递归处理嵌套对象</span>
      <span class="token keyword">let</span> newObj<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
      Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">renameProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> propertyMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyMap<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 根据映射对象替换属性名</span>
            <span class="token keyword">const</span> newKey <span class="token operator">=</span> propertyMap<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            newObj<span class="token punctuation">[</span>newKey<span class="token punctuation">]</span> <span class="token operator">=</span> newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">delete</span> newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 其他情况，直接返回值</span>
      <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>//递归treeData</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code>
  <span class="token keyword">const</span> <span class="token function-variable function">loops</span> <span class="token operator">=</span> <span class="token punctuation">(</span>list<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> parentValue<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> level<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>list <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> areaCode<span class="token punctuation">,</span> areaCname <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> node<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        parentValue<span class="token punctuation">,</span>
        areaCname<span class="token punctuation">,</span>
        areaCode<span class="token punctuation">,</span>
        completeTitle<span class="token operator">:</span> parentValue <span class="token operator">&amp;&amp;</span> parentValue<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span>
          parentValue<span class="token operator">?.</span>completeTitle <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>parentValue<span class="token operator">?.</span>completeTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> areaCname<span class="token punctuation">,</span>
        level<span class="token operator">:</span> level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
        relation<span class="token operator">:</span> <span class="token punctuation">{</span>
          province<span class="token operator">:</span> level <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> parentValue<span class="token operator">?.</span>relation<span class="token operator">?.</span>province<span class="token punctuation">,</span>
          city<span class="token operator">:</span> level <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> parentValue<span class="token operator">?.</span>relation<span class="token operator">?.</span>city<span class="token punctuation">,</span>
          district<span class="token operator">:</span> level <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>areaCname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token operator">!</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        node<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token function">loops</span><span class="token punctuation">(</span>children<span class="token punctuation">,</span> <span class="token punctuation">{</span> relation<span class="token operator">:</span> node<span class="token punctuation">.</span>relation<span class="token punctuation">,</span> completeTitle<span class="token operator">:</span> node<span class="token punctuation">.</span>completeTitle <span class="token punctuation">}</span><span class="token punctuation">,</span> level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> node<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="移除对象属性"><a href="#移除对象属性" class="header-anchor">#</a> 移除对象属性</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">45</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">72</span><span class="token punctuation">,</span> <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">68</span><span class="token punctuation">,</span> <span class="token literal-property property">p</span><span class="token operator">:</span> <span class="token number">98</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Longhand</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>x<span class="token punctuation">;</span>
<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>p<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {y: 72, z: 68}</span>

<span class="token comment">// Shorthand</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> p<span class="token punctuation">,</span> <span class="token operator">...</span>newObj<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {y: 72, z: 68}</span>
</code></pre></div><h2 id="form表单"><a href="#form表单" class="header-anchor">#</a> Form表单</h2> <h5 id="form表单中的switch-checkbox回显字段"><a href="#form表单中的switch-checkbox回显字段" class="header-anchor">#</a> form表单中的switch/checkbox回显字段</h5> <div class="language- extra-class"><pre class="language-text"><code>valuePropName ：子节点的值的属性，如 Switch 的是 'checked'。
</code></pre></div><ul><li><code>&lt;Modal /&gt;</code> 默认关闭后状态不会自动清空, 如果希望每次打开都是新内容，请设置 <code>destroyOnClose</code>。</li> <li><code>&lt;Modal /&gt;</code> 和 Form 一起配合使用时，设置 <code>destroyOnClose</code> 也不会在 Modal 关闭时销毁表单字段数据，需要设置 <code>&lt;Form preserve={false} /&gt;</code>。</li></ul> <h5 id="formlist-校验"><a href="#formlist-校验" class="header-anchor">#</a> formList 校验</h5> <div class="language-typescript extra-class"><pre class="language-typescript"><code> form<span class="token punctuation">.</span><span class="token function">validateFields</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'consume'</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token string">'projectCname'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'consume'</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token string">'confirmDate'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'consume'</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token string">'amount'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> consumeList <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFieldValue</span><span class="token punctuation">(</span><span class="token string">'consume'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>consumeList<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">//</span>
    form<span class="token punctuation">.</span><span class="token function">validateFields</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;fences&quot;</span><span class="token punctuation">,</span> index<span class="token punctuation">,</span> <span class="token string">&quot;fence&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>pointer-events: unset!important; /*add this it*/
</code></pre></div><h3 id="form常用"><a href="#form常用" class="header-anchor">#</a> form常用</h3> <p>父组件</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Drawer<span class="token punctuation">,</span> Tabs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> DeviceHook <span class="token keyword">from</span> <span class="token string">&quot;./device-hook&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AppHook <span class="token keyword">from</span> <span class="token string">&quot;./app-hook&quot;</span>
<span class="token keyword">import</span> BaseStationHook <span class="token keyword">from</span> <span class="token string">&quot;./base-station-hook&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> WifiHook <span class="token keyword">from</span> <span class="token string">&quot;./wifi-hook&quot;</span>
<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onSwitch</span><span class="token operator">:</span> <span class="token punctuation">(</span>v<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
  visible<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">AddDrawer</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onSwitch<span class="token punctuation">,</span> visible <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
    
   <span class="token comment">//createRef调用</span>
  <span class="token keyword">const</span> deviceRef<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

  <span class="token keyword">const</span> <span class="token punctuation">[</span>addedData<span class="token punctuation">,</span> setAddedData<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token generic-function"><span class="token function">useState</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> addedData<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

   <span class="token comment">//通过forward转发暴露form获取子组件的值</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onDeviceAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> deviceData <span class="token operator">=</span> deviceRef<span class="token punctuation">.</span>current<span class="token punctuation">.</span>form<span class="token punctuation">.</span><span class="token function">getFieldsValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> deviceData<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setAddedData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>addedData<span class="token punctuation">,</span> deviceData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">//通过传参实现子传父</span>
  <span class="token keyword">const</span> <span class="token function-variable function">onWifiAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> wifiData <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token function">setAddedData</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>addedData<span class="token punctuation">,</span> wifiData <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> footer <span class="token operator">=</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cancel<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onSwitch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        取消
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onSubmit<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        提交
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Drawer</span></span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>group-drawer-style<span class="token punctuation">&quot;</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>新增线索<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">770</span><span class="token punctuation">}</span></span> <span class="token attr-name">onClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">onSwitch</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">visible</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>visible<span class="token punctuation">}</span></span> <span class="token attr-name">footer</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>footer<span class="token punctuation">}</span></span> <span class="token attr-name">destroyOnClose</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>card<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs.TabPane</span></span> <span class="token attr-name">tab</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>号码<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
            
            //在子组件中传递命名的ref
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DeviceHook</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>deviceRef<span class="token punctuation">}</span></span> <span class="token attr-name">onDeviceAdd</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onDeviceAdd<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">DeviceHook</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs.TabPane</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Tabs.TabPane</span></span> <span class="token attr-name">tab</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>WiFi<span class="token punctuation">&quot;</span></span> <span class="token attr-name">key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-6<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">WifiHook</span></span>  <span class="token attr-name">onWifiAdd</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onWifiAdd<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">WifiHook</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs.TabPane</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Tabs</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
  );
};
export default AddDrawer;

</span></code></pre></div><p>通过forward转发暴露form获取子组件的值</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useImperativeHandle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CheckCodeHooks <span class="token keyword">from</span> <span class="token string">&quot;@/components/check-code-hooks&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useSelector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react-redux&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onDeviceAdd</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> DeviceHook <span class="token operator">=</span> <span class="token function">forwardRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>props<span class="token operator">:</span> IProps<span class="token punctuation">,</span> ref<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onDeviceAdd <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>

<span class="token comment">//转发form</span>
  <span class="token function">useImperativeHandle</span><span class="token punctuation">(</span>ref<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      form<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deviceList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          &lt;CheckCodeHooksdeviceCount=</span><span class="token punctuation">{</span><span class="token number">200</span><span class="token punctuation">}</span><span class="token plain-text"> /&gt;
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remark<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input.TextArea</span></span> <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入备注，最多填写20个字符<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onDeviceAdd<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">添加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> DeviceHook<span class="token punctuation">;</span>

</code></pre></div><p>//通过函数传参</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> forwardRef<span class="token punctuation">,</span> useImperativeHandle<span class="token punctuation">,</span> useRef<span class="token punctuation">,</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Button<span class="token punctuation">,</span> Form<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;antd&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> CheckTextHooks <span class="token keyword">from</span> <span class="token string">&quot;@/components/check/check-text-hooks&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CloudBatchServer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@/api/cloud-batch-server&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">IProps</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">onWifiAdd</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token constant">API</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CloudBatchServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">WifiHook</span> <span class="token operator">=</span> <span class="token punctuation">(</span>props<span class="token operator">:</span> IProps<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> onWifiAdd <span class="token punctuation">}</span> <span class="token operator">=</span> props<span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>form<span class="token punctuation">]</span> <span class="token operator">=</span> Form<span class="token punctuation">.</span><span class="token function">useForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> form<span class="token punctuation">.</span><span class="token function">getFieldsValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//传递params给父组件</span>
	props<span class="token punctuation">.</span><span class="token function">onWifiAdd</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form</span></span> <span class="token attr-name">form</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>form<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CheckTextHooks</span></span> <span class="token attr-name">hide</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span>  <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>remark<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Input.TextArea</span></span> <span class="token attr-name">maxLength</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">20</span><span class="token punctuation">}</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>请输入备注，最多填写20个字符<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onAdd<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">添加</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form.Item</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Form</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> WifiHook<span class="token punctuation">;</span>

</code></pre></div><h1 id="简单分支优化"><a href="#简单分支优化" class="header-anchor">#</a> 简单分支优化</h1> <h3 id="改为对象结构"><a href="#改为对象结构" class="header-anchor">#</a> 改为对象结构</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">getUserDescribe</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> describeForNameMap <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">小刘</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;刘哥哥&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">小红</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;小红妹妹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">陈龙</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;大师&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">李龙</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;师傅&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token function-variable function">大鹏</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;恶人&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    describeForNameMap<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token function">describeForNameMap</span><span class="token punctuation">(</span>陈龙<span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;此人比较神秘！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    
  <span class="token keyword">const</span> <span class="token function-variable function">onChangeIpt</span> <span class="token operator">=</span> <span class="token punctuation">(</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> value<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> Fn<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
      mobileNetworkCode<span class="token operator">:</span> setMobileNetworkCode<span class="token punctuation">,</span>
      locationAreaCode<span class="token operator">:</span> setLocationAreaCode<span class="token punctuation">,</span>
      cellId<span class="token operator">:</span> setCellId<span class="token punctuation">,</span>
      mobileCountryCode<span class="token operator">:</span> setMobileCountryCode<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Fn<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="二维数组"><a href="#二维数组" class="header-anchor">#</a> 二维数组</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> describeForNameMap <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;名字太长&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;名字太短&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;陈&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;小陈&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name <span class="token operator">===</span> <span class="token string">&quot;大鹏&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;管理员&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">&quot;李&quot;</span> <span class="token operator">&amp;&amp;</span> name <span class="token operator">!==</span> <span class="token string">&quot;李鹏&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;小李&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getUserDescribe</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> str<span class="token punctuation">;</span> <span class="token comment">// 存储判断结果</span>
    <span class="token keyword">const</span> getDescribe <span class="token operator">=</span> describeForNameMap<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>getDescribe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>getDescribe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        str <span class="token operator">=</span> getDescribe<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        str <span class="token operator">=</span> <span class="token string">&quot;此人比较神秘！&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getUserDescribe</span><span class="token punctuation">(</span><span class="token string">&quot;周&quot;</span><span class="token punctuation">)</span>

</code></pre></div><h3 id="数组对象"><a href="#数组对象" class="header-anchor">#</a> 数组对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> describeForNameMap <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token function-variable function">rule</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token function-variable function">print</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;名字太长&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token function-variable function">rule</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> name<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token function-variable function">print</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&quot;名字太短&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>


<span class="token keyword">function</span> <span class="token function">getUserDescribe</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> str<span class="token punctuation">;</span> <span class="token comment">// 存储判断结果</span>
    <span class="token comment">//find返回符合条件的第一个唯一结果</span>
    <span class="token keyword">const</span> getDescribe <span class="token operator">=</span> describeForNameMap<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span><span class="token string">&quot;rule&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//item.rule(name)同理</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>getDescribe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        str <span class="token operator">=</span> getDescribe<span class="token punctuation">[</span><span class="token string">&quot;print&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">////item.print(name)同理</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        str <span class="token operator">=</span> <span class="token string">&quot;此人比较神秘！&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getUserDescribe</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> str<span class="token punctuation">;</span>
    <span class="token comment">//filter返回符合筛选条件的所有结果为数组，find只返回符合条件的第一个结果</span>
    <span class="token keyword">const</span> getDescribe <span class="token operator">=</span> describeForNameMap<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">[</span><span class="token string">&quot;rule&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//item.rule(name)同理</span>
    
    <span class="token keyword">if</span> <span class="token punctuation">(</span>getDescribe<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token comment">//getDescribe为数组，第0项为符合条件的第一个结果</span>
        str <span class="token operator">=</span> getDescribe<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">&quot;print&quot;</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">////item.print(name)同理</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        str <span class="token operator">=</span> <span class="token string">&quot;此人比较神秘！&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> str<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">getUserDescribe</span><span class="token punctuation">(</span><span class="token string">&quot;周&quot;</span><span class="token punctuation">)</span> <span class="token comment">//名字太短</span>

</code></pre></div><h3 id="减少if-else面条代码"><a href="#减少if-else面条代码" class="header-anchor">#</a> 减少if...else面条代码</h3> <ul><li>一旦当我们写到超过两个<code>if...else</code>的函数的时候就该想想是否有更好的优化方法。</li> <li>比如现在需要让我们根据名称计算出麦某劳的食品价格，你可能会这么做。</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3653c009be944feb68b92bbdcae1b20~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <ul><li>这样的写法会让函数体有很多的条件判断语句，而当我们想下次增加一个商品的时候就需要修改函数内的逻辑增加一个<code>if...else</code>语句，这一定程度上也违反了<strong>开闭原则</strong>,当我们需要增加一个逻辑的时候要尽量通过扩展软件实体来解决需求变化，而不是通过修改已有的代码来完成变化。</li> <li>这是很经典的优化方式，我们可以使用一个类似<code>Map</code>结构的数据来保存所有商品，这里我们直接建立一个对象来存储。</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e708ffb8ad248939e12ff62fedf1ccb~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <ul><li>这样我们下次需要再增加一个商品时就不需要改动<code>getPrice</code>的逻辑了，当然了这里其实更多人喜欢直接在用的地方直接使用<code>foodMap</code>，我这里只是简单举了个例子表述这个思路。</li> <li>那么这时候就有同学会问了，如果我不想<code>key</code>只用字符串呢，这时候你就可以用到<code>new Map</code>了，思路也是差不多的，额外扩展一个实体来存储变化。</li></ul> <h3 id="管道操作取代冗余循环-filter"><a href="#管道操作取代冗余循环-filter" class="header-anchor">#</a> 管道操作取代冗余循环-filter</h3> <ul><li>有这么一个麦某劳食物列表</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a01ff53f65034e74a3ee30d30a6402ef~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <ul><li>如果你想找出属于套餐1的食物，你会怎么找呢？</li> <li>上面这种是我们以前经常使用的方法，显然我们替换成使用<code>filter</code>与<code>map</code>来取代<code>for</code>循环不仅可以使代码更精简，还可以使语义更加明确，这样我们一下就可以看出是先对数组<code>过滤</code>再<code>重组</code>。</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/950e2bf6ee75476b9f7da1f7e2a149a9~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <h3 id="find取代冗余循环"><a href="#find取代冗余循环" class="header-anchor">#</a> find取代冗余循环</h3> <ul><li>还是上面的例子，如果我们要在这个食品对象数组中按照属性值查找特定的食物时，<code>find</code>的用处就出来了。</li> <li>filter返回符合筛选条件的所有结果为数组，find只返回符合条件的第一个结果</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7ef9877f41554b5598c3684d0af476c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <h3 id="includes取代冗余循环"><a href="#includes取代冗余循环" class="header-anchor">#</a> includes取代冗余循环</h3> <ul><li>和上面两个细节类似的这些都是既有的函数也就是不用我们重新写的内置函数，巧用它会节省很多时间。</li> <li>众所周知，一碗<strong>康某傅老坛酸菜牛肉面</strong>有<strong>酸菜</strong>，<strong>面</strong>，<strong>牛肉粒</strong>，<strong>烟头</strong>和<strong>脚皮</strong>组成，那我们想用函数证实这个面里面是否有脚皮我们怎么写会比较简洁呢？</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a6aed73a33be4e6a811446b479439099~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <ul><li>同样的，不止是<strong>康某傅的酸菜牛肉面</strong>可以这样耍，所有类似的在数组里面找到特定元素的操作都可以使用<code>includes</code>函数来调用。</li></ul> <h3 id="result返回值"><a href="#result返回值" class="header-anchor">#</a> result返回值</h3> <ul><li>我们通常在写一些拥有返回值的函数的时候常常会以返回值变量命名而纠结，甚至对于一些长函数的时候还不使用变量而是直接<code>return</code>，这样的习惯其实是不好的，因为等我们下次再去参照这段代码的时候还需要重新捋清逻辑。</li> <li>通常的，在一个小函数中，我们可以使用<code>result</code>作为返回值。</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/06bb38edd6b94e6ea2bbd0ce12f782a4~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p> <h3 id="提前返回"><a href="#提前返回" class="header-anchor">#</a> 提前返回</h3> <ul><li><p>然而上面用<code>result</code>作为返回值并不适用于所有情况，往往有些时候我们需要提前结束函数体来避免后面的同事阅读多余的程序。</p></li> <li><p>如下的例子中当我们<code>selectedKey</code>不存在的时候应该立即<code>return</code>，这样就不用继续阅读下面的代码，否则面对更复杂的函数时会增加很多的阅读成本。</p> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/91edb4b407e14bda81cbabc5cb328899~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></p></li></ul> <h3 id="保持对象完整"><a href="#保持对象完整" class="header-anchor">#</a> 保持对象完整</h3> <ul><li>经常在我们通过请求拿到后端返回的数据会根据其中一些属性进行处理，如果需要处理的属性少的时候很多同学会习惯使用第一种方法。</li> <li>但其实这种习惯是不好的，因为当你无法确定这个函数以后还需不需要增加依赖属性的时候应该保持对象的完整，就像我上篇文章提到的，<strong>学会拥抱变化</strong>，假如<code>getDocDetail</code>不止要用到<code>icon</code>和<code>content</code>,可能以后还会有<code>title</code>，<code>date</code>等属性，所以我们不如直接将完整对象传入，不仅增加缩短参数列表还会让代码更易读。 <img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4947e6a9b7a6405a99ec02c4bdce1e20~tplv-k3u1fbpfcp-zoom-in-crop-mark:4536:0:0:0.awebp" alt="img"></li></ul> <p>作者：快跑啊小卢_
链接：https://juejin.cn/post/7079935342966472711
来源：稀土掘金
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p> <h2 id="_1-使用-const-定义"><a href="#_1-使用-const-定义" class="header-anchor">#</a> 1. 使用 const 定义</h2> <p>在开发中不要过度声明变量，尽量使用表达式和链式调用形式。然后一般能用 <code>const</code> 就不要用 <code>let</code> 。这种模式写多了之后，你会发现在项目中几乎找不到几个用 <code>let</code> 的地方：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// bad</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>userInfo<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  result <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// good</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> userInfo<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> <span class="token number">30</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>在项目中很多同事都会这样写，</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleFormChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> isUpload<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">'upload'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    isUpload <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    isUpload <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre></div><p>但实际上 <code>==</code> 和 <code>===</code> 的表达式可以直接给变量赋值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleFormChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isUpload <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">===</span> <span class="token string">'upload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果要取反也很简单：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleFormChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> isManual <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token string">'upload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-有条件地向对象、数组添加属性"><a href="#_2-有条件地向对象、数组添加属性" class="header-anchor">#</a> 2. 有条件地向对象、数组添加属性</h2> <h3 id="_1-向对象添加属性"><a href="#_1-向对象添加属性" class="header-anchor">#</a> 1) 向对象添加属性</h3> <p>可以使用展开运算符来有条件地向对象中添加属性：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> condition <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;dby&quot;</span><span class="token punctuation">,</span>
  <span class="token operator">...</span><span class="token punctuation">(</span>condition <span class="token operator">&amp;&amp;</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><blockquote><p>如果 <code>condition</code> 为 <code>true</code> ，则 <code>{ age: 16 }</code> 会被添加到对象中；如果 <code>condition</code> 为 <code>false</code> ，相当于展开 <code>false</code> ，不会对对象产生任何影响</p></blockquote> <h3 id="_2-向数组添加属性"><a href="#_2-向数组添加属性" class="header-anchor">#</a> 2) 向数组添加属性</h3> <p>这是 CRA 中 Webpack 配置的源码：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    isEnvProduction <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    useTypeScript <span class="token operator">&amp;&amp;</span>
      <span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>上面代码中，只有 <code>isEnvProduction</code> 为 <code>true</code> 才会添加 <code>MiniCssExtractPlugin</code> 插件；当 <code>isEnvProduction</code> 为 <code>false</code> 则会添加 <code>false</code> 到数组中，所以最后使用了 <code>filter</code> 过滤</p></blockquote> <p>上面这样写，逻辑上是没有问题，但是在 TS 项目中使用的时候，类型推断会有点问题。因为存在一种布尔值添加到数组的中间状态，而 TS 只能静态分析，不能执行代码。</p> <p>试问下面 <code>arr</code> 数组的类型：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'111'</span><span class="token punctuation">,</span> <span class="token boolean">true</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'222'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// string[]</span>
<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'111'</span><span class="token punctuation">,</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> <span class="token string">'222'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (string | boolean)[]</span>
</code></pre></div><p>下面是一种类型安全的做法：</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">(</span>isEnvProduction <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token punctuation">(</span>useTypeScript <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">ForkTsCheckerWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-数组小技巧"><a href="#_3-数组小技巧" class="header-anchor">#</a> 3. 数组小技巧</h2> <h3 id="_1-访问数组最后一个元素"><a href="#_1-访问数组最后一个元素" class="header-anchor">#</a> 1) 访问数组最后一个元素</h3> <p>在开发中我们常常需要访问数组最后一个元素，常规的做法是这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> rollbackUserList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastUser <span class="token operator">=</span> rollbackUserList<span class="token punctuation">[</span>rollbackUserList<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre></div><p>上面这样写逻辑上没问题，但是我们发现当数组的变量名很长的时候，整个表达式会变得非常长，影响代码可读性。一种方法是把上述逻辑封装一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 将获取数组最后一个元素的逻辑封装为一个函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">getLastEle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">[</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> lastUser <span class="token operator">=</span> <span class="token function">getLastEle</span><span class="token punctuation">(</span>rollbackUserList<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre></div><p>可以看到这样语义性就比较好了。还有一种是利用 <code>Array.prototype.slice</code> 方法，通过传递负索引，从右往左定位到最后一个元素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> lastUser <span class="token operator">=</span> rollbackUserList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
<span class="token comment">// 或者使用解构赋值</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>lastUser<span class="token punctuation">]</span> <span class="token operator">=</span> rollbackUserList<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre></div><p>注意 <code>slice</code> 方法返回的是一个 <strong>新数组</strong> 而不是元素本身，需要手动从数组中取出元素，看起来不是很优雅。实际上 ES2022 专门提供了一个 <code>Array.prototype.at</code> 方法，用于根据给定索引获取数组元素：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> lastUser <span class="token operator">=</span> rollbackUserList<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 4</span>
</code></pre></div><blockquote><p><code>at</code> 方法传递索引为正时从左往右定位（这与直接通过下标访问的作用一致），索引为负时从右往左定位。在访问数组最后一个元素的场景中非常好用。从 Chrome 92 开始已经支持 <code>at</code> 方法，<code>core-js</code> 也提供了 polyfill。</p> <p><a href="https://link.juejin.cn?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray%2Fat" target="_blank" rel="noopener noreferrer">developer.mozilla.org/en-US/docs/…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="_2-异步函数组合-异步串行调用"><a href="#_2-异步函数组合-异步串行调用" class="header-anchor">#</a> 2) 异步函数组合（异步串行调用）</h3> <p>我们知道，在函数式编程中有一个函数组合 <code>compose</code> 的技巧，可以把多个函数组合为一个函数，创建一个从右到左的数据流，右边函数执行的结果作为参数传入左边。例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 给定参数：[A, B, C, D]
 * 调用顺序：A(B(C(D())))
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">middlewares</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> middlewares<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">accu<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cur</span><span class="token punctuation">(</span>accu<span class="token punctuation">)</span><span class="token punctuation">,</span>
    initialValue
<span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre></div><p>从上面的代码可以看出 <code>compose</code> 是不能用于 Promise，因为 <code>compose</code> 需要将上一次调用的返回值，作为参数传入下一次调用，但 Promise 本身是一个包装过的数据结构，只有通过 <code>then</code> 方法才能拿到返回值。所以如果是异步的情况，我们通常会把 <code>reduce</code> 改成普通 <code>FOR</code> 循环。</p> <p>如果遇到异步的情况，例如想做一系列串行的请求，是否可以更优雅呢？本人在 Vite 源码中找到了答案，在 Vite 源码中有这么一段：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">await</span> postBuildHooks<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span>queue<span class="token punctuation">,</span> hook<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> queue<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">hook</span><span class="token punctuation">(</span>build <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>参考： <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fvitejs%2Fvite%2Fblob%2Fab23e6e7b490cf610a4465cc533f671a729fdfa8%2Fpackages%2Fvite%2Fsrc%2Fnode%2Fbuild.ts" target="_blank" rel="noopener noreferrer">github.com/vitejs/vite…<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <p>可以看出，这里对 <code>reducer</code> 函数进行了包装，将 <code>hook</code> 的执行放到 <code>then</code> 方法回调中，这样就可以保证调用顺序。按照这个思路，我们对上面 <code>compose</code> 方法稍微改动一下，就可以得到一个 <code>asyncCompose</code>：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * 给定参数：[A, B, C, D]
 * 调用顺序：Promise.resolve().then(res =&gt; D(res)).then(res =&gt; C(res)).then(res =&gt; B(res)).then(res =&gt; A(res))
 * 以上只是为了让大家看清楚，简化之后如下：Promise.resolve().then(D).then(C).then(B).then(A)
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">asyncCompose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">middlewares</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> middlewares<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">queue<span class="token punctuation">,</span> hook</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> queue<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token function">hook</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_4-解构赋值"><a href="#_4-解构赋值" class="header-anchor">#</a> 4. 解构赋值</h2> <p>解构赋值很方便，项目中经常会用到，可以分为以下两个场景：</p> <ul><li>对象/数组的解构；</li> <li>函数参数解构；</li></ul> <p>这里介绍四种常用技巧。</p> <h3 id="_1-深度解构"><a href="#_1-深度解构" class="header-anchor">#</a> 1) 深度解构</h3> <p>大部分时候我们只会解构一层，但实际上解构赋值是可以深度解构的：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;dby&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> b <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><h3 id="_2-解构时使用别名"><a href="#_2-解构时使用别名" class="header-anchor">#</a> 2) 解构时使用别名</h3> <p>假如后端返回的对象键名不是我们想要的，可以使用别名：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 这个键名太长了，我们希望把它换掉</span>
  <span class="token literal-property property">aaa_bbb_ccc</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;dby&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">12</span><span class="token punctuation">,</span>
    <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> <span class="token literal-property property">aaa_bbb_ccc</span><span class="token operator">:</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// { name: &quot;dby&quot;, age: 12, sex: true }</span>
</code></pre></div><p>取值在程序中非常常见，比如从对象<code>obj</code>中取值。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">const obj =</span> <span class="token punctuation">{</span>
    <span class="token property">a</span><span class="token punctuation">:</span>1<span class="token punctuation">,</span>
    <span class="token property">b</span><span class="token punctuation">:</span>2<span class="token punctuation">,</span>
    <span class="token property">c</span><span class="token punctuation">:</span>3<span class="token punctuation">,</span>
    <span class="token property">d</span><span class="token punctuation">:</span>4<span class="token punctuation">,</span>
    <span class="token property">e</span><span class="token punctuation">:</span>5<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>吐槽</strong>：</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const a</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj.a;</span>
<span class="token key attr-name">const b</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj.b;</span>
<span class="token key attr-name">const c</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj.c;</span>
<span class="token key attr-name">const d</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj.d;</span>
<span class="token key attr-name">const e</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj.e;</span>
</code></pre></div><p>吐槽：“不会用ES6的解构赋值来取值吗？5行代码用1行代码搞定不香吗？直接用对象名加属性名去取值，要是对象名短还好，很长呢？搞得代码中到处都是这个对象名。”</p> <p><strong>改进</strong>：</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const {a,b,c,d,e}</span> <span class="token punctuation">=</span> <span class="token value attr-value">obj;</span>
<span class="token key attr-name">const f</span> <span class="token punctuation">=</span> <span class="token value attr-value">a + d;</span>
<span class="token key attr-name">const g</span> <span class="token punctuation">=</span> <span class="token value attr-value">c + e;</span>
</code></pre></div><p><strong>反驳</strong></p> <p>不是不用ES6的解构赋值，而是服务端返回的数据对象中的属性名不是我想要的，这样取值，不是还得重新创建个遍历赋值。</p> <p><strong>吐槽</strong></p> <p>看来你对ES6的解构赋值掌握的还是不够彻底。如果想创建的变量名和对象的属性名不一致，可以这么写：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span>needName<span class="token punctuation">}</span> <span class="token operator">=</span> obj<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>needName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 1</span>
</code></pre></div><p><strong>补充</strong></p> <p>ES6的解构赋值虽然好用。但是要注意解构的对象不能为<code>undefined</code>、<code>null</code>。否则会报错，故要给被解构的对象一个默认值。</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">const</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">}</span> <span class="token selector">= obj ||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-解构时使用默认值"><a href="#_3-解构时使用默认值" class="header-anchor">#</a> 3) 解构时使用默认值</h3> <p>对象的解构可以使用默认值，默认值生效的条件是，对象的属性值严格等于 <code>undefined</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fetchUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">aaa_bbb_ccc</span><span class="token operator">:</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>以上三个特性可以结合使用</p></blockquote> <h3 id="_4-使用短路避免报错"><a href="#_4-使用短路避免报错" class="header-anchor">#</a> 4) 使用短路避免报错</h3> <p>解构赋值虽然好用，但是要注意解构的对象不能为 <code>undefined</code> 、<code>null</code> ，否则会报错，故要给被解构的对象一个默认值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">,</span>d<span class="token punctuation">,</span>e<span class="token punctuation">}</span> <span class="token operator">=</span> obj <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_5-展开运算符"><a href="#_5-展开运算符" class="header-anchor">#</a> 5. 展开运算符</h2> <p>使用展开运算符合并两个数组或者两个对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// bad</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// good</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>a<span class="token punctuation">,</span><span class="token operator">...</span>b<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// bad</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// good</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj1<span class="token punctuation">,</span> <span class="token operator">...</span>obj2 <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_6-检查属性是否存在对象中"><a href="#_6-检查属性是否存在对象中" class="header-anchor">#</a> 6. 检查属性是否存在对象中</h2> <p>1、obj.hasOwnProperty(prop)
参数：prop要检测属性的字符串形式表示的名称，或者symbol。</p> <p>返回值：用来判断某个对象是否含有指定的属性的布尔值 。</p> <p>注意：只会判断自身特定的属性，会忽略掉从原型链上继承的属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;阿&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;清&quot;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;firstName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre></div><p>2、in（prop in object）
参数： 一个字符串类型或者 symbol 类型的属性名或者数组索引（非symbol类型将会强制转为字符串）。</p> <p>注意：如果原型链中有也会返回true</p> <p>返回值：Boolean</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">firstName</span><span class="token operator">:</span> <span class="token string">&quot;阿&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">lastName</span><span class="token operator">:</span> <span class="token string">&quot;清&quot;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;firstName&quot;</span> <span class="token keyword">in</span> obj1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;toString&quot;</span> <span class="token keyword">in</span> obj1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre></div><p>3、直接取有就返回，没有就undefined
注意：与in一样都会前去原型链中寻找</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>firstName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>secondtName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//undefind</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">[</span><span class="token string">&quot;secondtName&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">//同理</span>

</code></pre></div><h2 id="_7-对象的遍历"><a href="#_7-对象的遍历" class="header-anchor">#</a> 7. 对象的遍历</h2> <p>项目中很多同事都会这样写：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>吐槽：用 <code>Object.keys</code> 或者 <code>Object.entries</code> 转成数组就可以用数组方法遍历了，而且遍历的是自身属性，不会遍历到原型上。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> 
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>举个例子，将对象的 key、value 拼接为查询字符串：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">_stringify</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">_stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token string">&quot;2333&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 'a=1&amp;b=2&amp;c=2333'</span>
</code></pre></div><p>反驳：有时候不想遍历整个对象，数组方法不能用 <code>break</code> 终止循环呀。</p> <p>吐槽：看来你对数组方法掌握还是不够彻底，使用 <code>find</code> 方法找到符合条件的项就不会继续遍历。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token operator">=&gt;</span> key <span class="token operator">===</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>总结：在开发中尽量不要写 for 循环，无论数组和对象。对象就通过 <code>Object.keys</code> 、<code>Object.values</code> 、<code>Object.entries</code> 转为数组进行遍历。这样可以写成 JS 表达式，充分利用函数式编程。</p></blockquote> <h2 id="_8-使用-includes-简化-if-判断"><a href="#_8-使用-includes-简化-if-判断" class="header-anchor">#</a> 8. 使用 includes 简化 if 判断</h2> <p>在项目中经常看到这样的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">||</span> a <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">||</span> a <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">||</span> a <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以使用 <code>includes</code> 简化代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_10-字符串小技巧"><a href="#_10-字符串小技巧" class="header-anchor">#</a> 10. 字符串小技巧</h2> <h3 id="_1-字符串不满两位补零"><a href="#_1-字符串不满两位补零" class="header-anchor">#</a> 1) 字符串不满两位补零</h3> <p>这个需求在开发中挺常见。例如，调用 Date api 获取到日期可能只有一位：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
</code></pre></div><p>常规做法:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    date <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>；
<span class="token punctuation">}</span>
</code></pre></div><p>使用 <code>String.prototype.slice</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 不管几位，都在前面拼接一个 0 ，然后截取最后两位</span>
date <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">0</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 <code>String.prototype.padStart</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 当字符串长度小于第一个参数值，就在前面补第二个参数</span>
date <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-千分位分隔符"><a href="#_2-千分位分隔符" class="header-anchor">#</a> 2) 千分位分隔符</h3> <p>实现如下的需求：</p> <ul><li>从后往前每三个数字前加一个逗号</li> <li>开头不能加逗号</li></ul> <p>这样看起来非常符合 <code>(?=p)</code> 的规律，<code>p</code> 可以表示每三个数字，要添加逗号所处的位置正好是 <code>(?=p)</code> 匹配出来的位置。</p> <p>第一步，先尝试把最后一个逗号弄出来：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;300000000&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=\d{3}$)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// '300000,000'</span>
</code></pre></div><p>第二步，把所有逗号都弄出来：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;300000000&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// ',300,000,000'</span>
</code></pre></div><blockquote><p>使用括号把一个 <code>p</code> 模式变成一个整体</p></blockquote> <p>第三步，去掉首位的逗号：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;300000000&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?!^)(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// '300,000,000'</span>
</code></pre></div><h3 id="_3-借用数组拼接字符串"><a href="#_3-借用数组拼接字符串" class="header-anchor">#</a> 3) 借用数组拼接字符串</h3> <p>很多同学都知道 <strong>模板字符串</strong> 可以很方便地进行字符串拼接，但是需要拼接较多参数的时候，这样就显得比较麻烦：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// HH -&gt; 23</span>
<span class="token comment">// mm -&gt; 58</span>
<span class="token comment">// ss -&gt; 32</span>
<span class="token keyword">const</span> timeString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">HH</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>mm<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ss<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">// scheme -&gt; https://</span>
<span class="token comment">// host -&gt; 10.3.71.108</span>
<span class="token comment">// port -&gt; :8080</span>
<span class="token keyword">const</span> URLString <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scheme<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>实际上，拼接字符串，除了使用模板字符串的方式，还可以使用数组：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> timeString <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">HH</span><span class="token punctuation">,</span> mm<span class="token punctuation">,</span> ss<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> URLString <span class="token operator">=</span> <span class="token punctuation">[</span>scheme<span class="token punctuation">,</span> host<span class="token punctuation">,</span> port<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>顺便一提，本人之前维护过一个 jQuery 项目，就使用这种方式拼接 html 模板：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> dataSource <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;dby&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;dm&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;233&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> template <span class="token operator">=</span> dataSource<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_4-判断字符串前缀、后缀"><a href="#_4-判断字符串前缀、后缀" class="header-anchor">#</a> 4) 判断字符串前缀、后缀</h3> <p>判断字符串前缀、后缀不要一言不合就使用正则表达式：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;https://bili98.cn&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isHTTPS <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^https:\/\/</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> fileName <span class="token operator">=</span> <span class="token string">&quot;main.py&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isPythonCode <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.py$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>推荐使用 <code>String.prototype.startsWith</code> 和 <code>String.prototype.endsWith</code>，语义性更好：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;https://bili98.cn&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isHTTPS <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;https://&quot;</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token keyword">const</span> fileName <span class="token operator">=</span> <span class="token string">&quot;main.py&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> isPythonCode <span class="token operator">=</span> fileName<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">&quot;.py&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_5-空值合并-操作符"><a href="#_5-空值合并-操作符" class="header-anchor">#</a> 5. 空值合并 <code>??</code> 操作符</h3> <p>当我们想检查一个变量是否为 <code>null</code> 或 <code>undefined</code> 时，<code>??</code>操作符很有用。当它的左侧操作数为<code>null</code> 或 <code>undefined</code>时，它返回右侧的操作数，否则返回其左侧的操作数。</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const foo</span> <span class="token punctuation">=</span> <span class="token value attr-value">null ?? 'Hello';</span>
console.log(foo); // 'Hello'

<span class="token key attr-name">const bar</span> <span class="token punctuation">=</span> <span class="token value attr-value">'Not null' ?? 'Hello';</span>
console.log(bar); // 'Not null'

<span class="token key attr-name">const baz</span> <span class="token punctuation">=</span> <span class="token value attr-value">0 ?? 'Hello';</span>
console.log(baz); // 0
</code></pre></div><p>在第三个示例中，返回 <code>0</code>，因为即使 <code>0</code> 在 JS 中被认为是假的，但它不是<code>null</code>的或<code>undefined</code>的。你可能认为我们可以用||算子但这两者之间是有区别的</p> <p>你可能认为我们可以在这里使用 <code>||</code> 操作符，但这两者之间是有区别的。</p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const cannotBeZero</span> <span class="token punctuation">=</span> <span class="token value attr-value">0 || 5;</span>
console.log(cannotBeZero); // 5

<span class="token key attr-name">const canBeZero</span> <span class="token punctuation">=</span> <span class="token value attr-value">0 ?? 5;</span>
console.log(canBeZero); // 0
</code></pre></div><h3 id="_6-关于输入框非空的判断"><a href="#_6-关于输入框非空的判断" class="header-anchor">#</a> <strong>6.关于输入框非空的判断</strong></h3> <p>在处理输入框相关业务时，往往会判断输入框未输入值的场景。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">&amp;&amp;</span> value <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>吐槽</strong></p> <p>ES6中新出的空值合并运算符了解过吗，要写那么多条件吗？</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token operator">??</span>''<span class="token punctuation">)</span> <span class="token operator">!=</span><span class="token operator">=</span> ''<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_7-关于拼接字符串的吐槽"><a href="#_7-关于拼接字符串的吐槽" class="header-anchor">#</a> 7.关于拼接字符串的吐槽</h3> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'小明';</span>
<span class="token key attr-name">const score</span> <span class="token punctuation">=</span> <span class="token value attr-value">59;</span>
<span class="token key attr-name">let result</span> <span class="token punctuation">=</span> <span class="token value attr-value">'';</span>
if(score &gt; 60){
  <span class="token key attr-name">result</span> <span class="token punctuation">=</span> <span class="token value attr-value">`${name}的考试成绩及格`;</span> 
}else{
  <span class="token key attr-name">result</span> <span class="token punctuation">=</span> <span class="token value attr-value">`${name}的考试成绩不及格`;</span> 
}
复制代码
</code></pre></div><p><strong>吐槽</strong></p> <p>像你们这样用ES6字符串模板，还不如不用，你们根本不清楚在<code>${}</code>中可以做什么操作。在<code>${}</code>中可以放入任意的JavaScript表达式，可以进行运算，以及引用对象属性。</p> <p><strong>改进</strong></p> <div class="language-ini extra-class"><pre class="language-ini"><code><span class="token key attr-name">const name</span> <span class="token punctuation">=</span> <span class="token value attr-value">'小明';</span>
<span class="token key attr-name">const score</span> <span class="token punctuation">=</span> <span class="token value attr-value">59;</span>
<span class="token key attr-name">const result</span> <span class="token punctuation">=</span> <span class="token value attr-value">`${name}的考试成绩${score &gt; 60 ? '及格':'不及格'}`</span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>isReAnalysis{
    device: false,
    phone: false,
    baseStation: false,
    ip: false,
    wifiMac: false,
    app: false,
    geoFence: false,
}
</code></pre></div><h4 id="函数柯里化"><a href="#函数柯里化" class="header-anchor">#</a> 函数柯里化</h4> <p>函数柯里化是一种将多个参数的函数转换为一系列只接受一个参数的函数的技术。这些单参数函数可以被顺序调用以产生与原始多参数函数相同的结果。这个过程被称为柯里化。</p> <p>举个例子，假设有一个接受两个参数的函数 <code>add(a, b)</code>，可以通过柯里化将其转换为一个函数链 <code>add(a)(b)</code>。在这个示例中，第一个调用将返回一个只接受一个参数的函数，这个函数期望接收第二个参数，然后返回结果。</p> <p>这个技术的优点是可以帮助我们创建更加灵活和可复用的函数。通过将函数柯里化，我们可以更好地控制函数的执行过程，并在不同的上下文中复用函数的一部分。柯里化还可以使我们更容易地创建新函数，只需要传递一些固定的参数。</p> <p>在 JavaScript 中，函数柯里化可以使用 <code>bind()</code> 方法或闭包来实现。例如，以下是一个使用闭包实现的柯里化 <code>add()</code> 函数的示例：</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> addFive <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addFive</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 8</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addFive</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 12</span>

</code></pre></div><p>在这里，我们首先定义了一个函数 <code>add()</code>，它返回另一个函数，该函数接受一个参数并返回两个参数的和。然后，我们使用 <code>add()</code> 函数创建一个新的函数 <code>addFive()</code>，该函数将 <code>5</code> 作为第一个参数传递给 <code>add()</code> 函数。现在，我们可以使用 <code>addFive()</code> 函数来添加 <code>5</code> 到任何数字上，而不必再次传递 <code>5</code>。</p> <p>React</p> <p>除useEffect外获取useState异步的方法</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> count<span class="token operator">:</span> newCount <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">setCount</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'current count:'</span><span class="token punctuation">,</span> newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Count: </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-tsx extra-class"><pre class="language-tsx"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useRef <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>count<span class="token punctuation">,</span> setCount<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> countRef <span class="token operator">=</span> <span class="token function">useRef</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newCount <span class="token operator">=</span> count <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token function">setCount</span><span class="token punctuation">(</span>newCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    countRef<span class="token punctuation">.</span>current <span class="token operator">=</span> newCount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// 在需要访问最新状态值的地方使用countRef.current</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'current count:'</span><span class="token punctuation">,</span> countRef<span class="token punctuation">.</span>current<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Count: </span><span class="token punctuation">{</span>count<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Increment</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre></div><p>Select 虚拟滚动</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code>           <span class="token keyword">const</span> <span class="token punctuation">[</span>currentPage<span class="token punctuation">,</span> setCurrentPage<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 我的围栏当前页数</span>

  <span class="token keyword">const</span> <span class="token punctuation">[</span>hasMore<span class="token punctuation">,</span> setHasMore<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否还有更多围栏数据可加载</span>

<span class="token operator">&lt;</span>Select
            onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
            getPopupContainer<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
              document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;select-container&quot;</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">any</span>
            <span class="token punctuation">}</span>
            open<span class="token operator">=</span><span class="token punctuation">{</span>open<span class="token punctuation">}</span>
            showSearch
            style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> width<span class="token operator">:</span> <span class="token number">320</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            onPopupScroll<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> fenceType <span class="token operator">===</span> <span class="token string">&quot;A05&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">handlePopupScroll</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// 监听下拉列表滚动事件</span>
            value<span class="token operator">=</span><span class="token punctuation">{</span>fenceType <span class="token operator">===</span> <span class="token string">&quot;A04&quot;</span> <span class="token operator">?</span> country <span class="token operator">:</span> myFence<span class="token punctuation">}</span>
            onChange<span class="token operator">=</span><span class="token punctuation">{</span>onChangeCountry<span class="token punctuation">}</span>
            dropdownRender<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span>menu<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">dropdownRender</span><span class="token punctuation">(</span>menu<span class="token punctuation">)</span><span class="token punctuation">}</span>
            optionFilterProp<span class="token operator">=</span><span class="token string">&quot;label&quot;</span>
            options<span class="token operator">=</span><span class="token punctuation">{</span> fenceList<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                    value<span class="token operator">:</span> item<span class="token punctuation">.</span>geofenceCode<span class="token punctuation">,</span>
                    label<span class="token operator">:</span> item<span class="token punctuation">.</span>geofenceCname
                  <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            
   <span class="token comment">// 监听滚动事件</span>
  <span class="token keyword">const</span> <span class="token function-variable function">handlePopupScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token comment">// 判断是否滚动到底部</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      target<span class="token punctuation">.</span>scrollHeight <span class="token operator">-</span> target<span class="token punctuation">.</span>scrollTop <span class="token operator">===</span> target<span class="token punctuation">.</span>clientHeight <span class="token operator">&amp;&amp;</span>
      hasMore
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">getFenceList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">//获取我的围栏列表</span>
  <span class="token keyword">const</span> <span class="token function-variable function">getFenceList</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> result<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">geofenceListAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> records <span class="token punctuation">}</span> <span class="token operator">=</span> result<span class="token punctuation">;</span>
      <span class="token function">setFenceList</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>fenceList<span class="token punctuation">,</span> <span class="token operator">...</span>records<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setCurrentPage</span><span class="token punctuation">(</span>currentPage <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 更新当前页数</span>
      <span class="token function">setHasMore</span><span class="token punctuation">(</span>records<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  
    <span class="token comment">//下拉框title</span>
  <span class="token keyword">const</span> <span class="token function-variable function">dropdownRender</span> <span class="token operator">=</span> <span class="token punctuation">(</span>menu<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Style<span class="token punctuation">[</span><span class="token string">&quot;fence-list-title&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">围栏类型</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio.Group</span></span> <span class="token attr-name">onChange</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onChangeFenceType<span class="token punctuation">}</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>fenceType<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;A03&quot;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">境内区域</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;A04&quot;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">境外地区</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Radio</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token string">&quot;A05&quot;</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">我的围栏</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Radio.Group</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>Style<span class="token punctuation">[</span><span class="token string">&quot;add-icon&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PlusOutlined</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text"> 新建围栏
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
          <span class="token attr-name">onScroll</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handlePopupScroll<span class="token punctuation">}</span></span><span class="token comment">//重要</span>
          <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token operator">:</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">,</span> overflowY<span class="token operator">:</span> <span class="token string">&quot;auto&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token punctuation">&gt;</span></span><span class="token plain-text">
          </span><span class="token punctuation">{</span>menu<span class="token punctuation">}</span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
      ) 
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>递归加载子数据</p> <div class="language-tsx extra-class"><pre class="language-tsx"><code>        <span class="token keyword">if</span> <span class="token punctuation">(</span>area<span class="token operator">?.</span>provinceAreaCode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">let</span> value<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            area<span class="token operator">?.</span>provinceAreaCode <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>provinceAreaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>province<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            area<span class="token operator">?.</span>cityAreaCode <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>cityAreaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>city<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            area<span class="token operator">?.</span>areaCode <span class="token operator">&amp;&amp;</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>areaCode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>area<span class="token punctuation">.</span>district<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>Boolean<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">loadChildData</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token function">setCascaderValue</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>  

<span class="token comment">// 递归加载子数据</span>
  <span class="token keyword">const</span> <span class="token function-variable function">loadChildData</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>pathValues<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pathValues<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">AREA</span><span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      active<span class="token operator">:</span> <span class="token string">&quot;Y&quot;</span><span class="token punctuation">,</span>
      parentAreaCode<span class="token operator">:</span> <span class="token string">&quot;100000000000&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 初始化第一级数据 - 省级</span>
    <span class="token keyword">const</span> newOptions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token constant">RESULT</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> currentOptions<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>newOptions<span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> pathValues<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> currentValue <span class="token operator">=</span> pathValues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">let</span> targetOption <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> areaCode <span class="token operator">=</span> currentValue<span class="token operator">?.</span>split<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
        active<span class="token operator">:</span> <span class="token string">&quot;Y&quot;</span><span class="token punctuation">,</span>
        parentAreaCode<span class="token operator">:</span> areaCode
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        targetOption <span class="token operator">=</span> currentOptions<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>option<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> option<span class="token punctuation">.</span>value <span class="token operator">===</span> currentValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">AREA</span><span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        targetOption<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token constant">RESULT</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> province <span class="token operator">=</span> currentOptions<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>pathValues<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?.</span>split<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> data<span class="token operator">:</span> <span class="token builtin">any</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">AREA</span><span class="token punctuation">.</span><span class="token function">getArea</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        province<span class="token operator">?.</span>children<span class="token operator">?.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span>areaCode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            item<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token constant">RESULT</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> i <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">setOptions</span><span class="token punctuation">(</span>currentOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/react-tips/handbook/git.html" class="prev">
          常用git
        </a></span> <!----></p></div> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-d227ad56 data-v-973d3248><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#随机数" class="sidebar-link reco-side-随机数" data-v-d227ad56>随机数</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#如何判断一个对象是不是空对象" class="sidebar-link reco-side-如何判断一个对象是不是空对象" data-v-d227ad56>如何判断一个对象是不是空对象？</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#数组去重" class="sidebar-link reco-side-数组去重" data-v-d227ad56>数组去重</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#数组对象去重" class="sidebar-link reco-side-数组对象去重" data-v-d227ad56>数组对象去重</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#父组件获取子组件中的值-通过ref" class="sidebar-link reco-side-父组件获取子组件中的值-通过ref" data-v-d227ad56>父组件获取子组件中的值-通过ref</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#一、array" class="sidebar-link reco-side-一、array" data-v-d227ad56>一、Array</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-添加元素" class="sidebar-link reco-side-_1-添加元素" data-v-d227ad56>1.添加元素</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-删除元素" class="sidebar-link reco-side-_2-删除元素" data-v-d227ad56>2.删除元素</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_3-合并数组" class="sidebar-link reco-side-_3-合并数组" data-v-d227ad56>3.合并数组</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_4-包含某个元素" class="sidebar-link reco-side-_4-包含某个元素" data-v-d227ad56>4.包含某个元素</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_5-类数组转换成数组" class="sidebar-link reco-side-_5-类数组转换成数组" data-v-d227ad56>5.类数组转换成数组</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_6-判断是否为数组" class="sidebar-link reco-side-_6-判断是否为数组" data-v-d227ad56>6.判断是否为数组</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_7-判断数组是否符合条件" class="sidebar-link reco-side-_7-判断数组是否符合条件" data-v-d227ad56>7.判断数组是否符合条件</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#二、为什么区分原始类型和对象类型" class="sidebar-link reco-side-二、为什么区分原始类型和对象类型" data-v-d227ad56>二、为什么区分原始类型和对象类型</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-1-不可变性" class="sidebar-link reco-side-_2-1-不可变性" data-v-d227ad56>2.1 不可变性</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-2-引用类型" class="sidebar-link reco-side-_2-2-引用类型" data-v-d227ad56>2.2 引用类型</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#小数相加" class="sidebar-link reco-side-小数相加" data-v-d227ad56>小数相加</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#array-from-抽取数组对象中的某一属性为数组" class="sidebar-link reco-side-array-from-抽取数组对象中的某一属性为数组" data-v-d227ad56>Array.from-抽取数组对象中的某一属性为数组</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#数组转换为数组对象" class="sidebar-link reco-side-数组转换为数组对象" data-v-d227ad56>数组转换为数组对象</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#object-assign-往数组对象中的每个对象都新增同一字段" class="sidebar-link reco-side-object-assign-往数组对象中的每个对象都新增同一字段" data-v-d227ad56>Object.assign-往数组对象中的每个对象都新增同一字段</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#多层数组对象改变属性名" class="sidebar-link reco-side-多层数组对象改变属性名" data-v-d227ad56>多层数组对象改变属性名</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#移除对象属性" class="sidebar-link reco-side-移除对象属性" data-v-d227ad56>移除对象属性</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#form表单" class="sidebar-link reco-side-form表单" data-v-d227ad56>Form表单</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#form常用" class="sidebar-link reco-side-form常用" data-v-d227ad56>form常用</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#改为对象结构" class="sidebar-link reco-side-改为对象结构" data-v-d227ad56>改为对象结构</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#二维数组" class="sidebar-link reco-side-二维数组" data-v-d227ad56>二维数组</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#数组对象" class="sidebar-link reco-side-数组对象" data-v-d227ad56>数组对象</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#减少if-else面条代码" class="sidebar-link reco-side-减少if-else面条代码" data-v-d227ad56>减少if...else面条代码</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#管道操作取代冗余循环-filter" class="sidebar-link reco-side-管道操作取代冗余循环-filter" data-v-d227ad56>管道操作取代冗余循环-filter</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#find取代冗余循环" class="sidebar-link reco-side-find取代冗余循环" data-v-d227ad56>find取代冗余循环</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#includes取代冗余循环" class="sidebar-link reco-side-includes取代冗余循环" data-v-d227ad56>includes取代冗余循环</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#result返回值" class="sidebar-link reco-side-result返回值" data-v-d227ad56>result返回值</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#提前返回" class="sidebar-link reco-side-提前返回" data-v-d227ad56>提前返回</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#保持对象完整" class="sidebar-link reco-side-保持对象完整" data-v-d227ad56>保持对象完整</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-使用-const-定义" class="sidebar-link reco-side-_1-使用-const-定义" data-v-d227ad56>1. 使用 const 定义</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-有条件地向对象、数组添加属性" class="sidebar-link reco-side-_2-有条件地向对象、数组添加属性" data-v-d227ad56>2. 有条件地向对象、数组添加属性</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-向对象添加属性" class="sidebar-link reco-side-_1-向对象添加属性" data-v-d227ad56>1) 向对象添加属性</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-向数组添加属性" class="sidebar-link reco-side-_2-向数组添加属性" data-v-d227ad56>2) 向数组添加属性</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_3-数组小技巧" class="sidebar-link reco-side-_3-数组小技巧" data-v-d227ad56>3. 数组小技巧</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-访问数组最后一个元素" class="sidebar-link reco-side-_1-访问数组最后一个元素" data-v-d227ad56>1) 访问数组最后一个元素</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-异步函数组合-异步串行调用" class="sidebar-link reco-side-_2-异步函数组合-异步串行调用" data-v-d227ad56>2) 异步函数组合（异步串行调用）</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_4-解构赋值" class="sidebar-link reco-side-_4-解构赋值" data-v-d227ad56>4. 解构赋值</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-深度解构" class="sidebar-link reco-side-_1-深度解构" data-v-d227ad56>1) 深度解构</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-解构时使用别名" class="sidebar-link reco-side-_2-解构时使用别名" data-v-d227ad56>2) 解构时使用别名</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_3-解构时使用默认值" class="sidebar-link reco-side-_3-解构时使用默认值" data-v-d227ad56>3) 解构时使用默认值</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_4-使用短路避免报错" class="sidebar-link reco-side-_4-使用短路避免报错" data-v-d227ad56>4) 使用短路避免报错</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_5-展开运算符" class="sidebar-link reco-side-_5-展开运算符" data-v-d227ad56>5. 展开运算符</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_6-检查属性是否存在对象中" class="sidebar-link reco-side-_6-检查属性是否存在对象中" data-v-d227ad56>6. 检查属性是否存在对象中</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_7-对象的遍历" class="sidebar-link reco-side-_7-对象的遍历" data-v-d227ad56>7. 对象的遍历</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_8-使用-includes-简化-if-判断" class="sidebar-link reco-side-_8-使用-includes-简化-if-判断" data-v-d227ad56>8. 使用 includes 简化 if 判断</a></li><li class="level-2" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_10-字符串小技巧" class="sidebar-link reco-side-_10-字符串小技巧" data-v-d227ad56>10. 字符串小技巧</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_1-字符串不满两位补零" class="sidebar-link reco-side-_1-字符串不满两位补零" data-v-d227ad56>1) 字符串不满两位补零</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_2-千分位分隔符" class="sidebar-link reco-side-_2-千分位分隔符" data-v-d227ad56>2) 千分位分隔符</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_3-借用数组拼接字符串" class="sidebar-link reco-side-_3-借用数组拼接字符串" data-v-d227ad56>3) 借用数组拼接字符串</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_4-判断字符串前缀、后缀" class="sidebar-link reco-side-_4-判断字符串前缀、后缀" data-v-d227ad56>4) 判断字符串前缀、后缀</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_5-空值合并-操作符" class="sidebar-link reco-side-_5-空值合并-操作符" data-v-d227ad56>5. 空值合并 ?? 操作符</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_6-关于输入框非空的判断" class="sidebar-link reco-side-_6-关于输入框非空的判断" data-v-d227ad56>6.关于输入框非空的判断</a></li><li class="level-3" data-v-d227ad56><a href="/react-tips/handbook/tips.html#_7-关于拼接字符串的吐槽" class="sidebar-link reco-side-_7-关于拼接字符串的吐槽" data-v-d227ad56>7.关于拼接字符串的吐槽</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-e58f9186 data-v-e58f9186><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-e58f9186><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-e58f9186></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-e58f9186></path></svg></div></div></div>
    <script src="/react-tips/assets/js/app.d810ae55.js" defer></script><script src="/react-tips/assets/js/3.d9804723.js" defer></script><script src="/react-tips/assets/js/1.8b4155cb.js" defer></script><script src="/react-tips/assets/js/12.ebd26a42.js" defer></script>
  </body>
</html>
